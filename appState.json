{"EDITOR_STATE":{"allProjectFiles":{"15cb8ebf-b0f6-42fa-a487-65a8fbccc75e":{"id":"15cb8ebf-b0f6-42fa-a487-65a8fbccc75e","parent":null,"name":"plaza","type":"DIRECTORY","isDirectory":true,"children":["975d2040-48a0-4122-a747-1c7b048f1ecb","8cb81d01-c302-431a-8d33-bfb1c09efc82"],"isRemovable":false,"filePath":"plaza"},"975d2040-48a0-4122-a747-1c7b048f1ecb":{"id":"975d2040-48a0-4122-a747-1c7b048f1ecb","parent":"15cb8ebf-b0f6-42fa-a487-65a8fbccc75e","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"plaza/lambda.js","code":"let AWS = require('aws-sdk');\nlet SL_AWS = require('slappforge-sdk-aws');\nlet connectionManager = require('./ConnectionManager');\nconst rds = new SL_AWS.RDS(connectionManager);\nexports.handler = function (event, context, callback) {\n\n\t// You can pass the existing connection to this function.\n\t// A new connection will be created if it's not present as the third param \n\t// You must always end/destroy the DB connection after it's used\n\trds.query({\n\t\tinstanceIdentifier: 'plaza-mysql',\n\t\tquery: 'SELECT * FROM people',\n\t\tinserts: []\n\t}, function (error, results, connection) {\n\t\tif (error) {\n\t\t\tconsole.log(\"Error occurred\");\n\t\t\tthrow error;\n\t\t} else {\n\t\t\tconsole.log(\"Success\")\n\t\t\tconsole.log(results);\n\t\t}\n\n\t\tconnection.end();\n\t});\n\n\tcallback(null, 'Successfully executed');\n}","triggers":[{"resourceName":"apigusWest1plazaapigetpersonget","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"version":5,"syncVersion":32,"references":[]},"8cb81d01-c302-431a-8d33-bfb1c09efc82":{"id":"8cb81d01-c302-431a-8d33-bfb1c09efc82","parent":"15cb8ebf-b0f6-42fa-a487-65a8fbccc75e","name":"ConnectionManager.js","type":"JS_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"plaza/ConnectionManager.js","code":"module.exports=function(){\n\n    this.dbConnections = [];\n\n    this.dbConnections[\"plaza-mysql\"] = {\n            host: process.env.EndPoint_rdsPlazaMysql,\n            port: process.env.Port_rdsPlazaMysql,\n            user: process.env.User_rdsPlazaMysql,\n            password: process.env.Password_rdsPlazaMysql,\n            database: \"plaza\",\n        };\n    };","triggers":[]}},"rootNode":"15cb8ebf-b0f6-42fa-a487-65a8fbccc75e","openFiles":["975d2040-48a0-4122-a747-1c7b048f1ecb"],"currentFileId":"975d2040-48a0-4122-a747-1c7b048f1ecb","resources":{"apigusWest1plazaapiany":{"name":"apigusWest1plazaapiany","type":"API_GATEWAY","config":{"selectedRegion":"us-west-1","apiMode":0,"apiName":"plaza","endpointType":"EDGE","resourceMode":0,"resourceName":"api","resourcePath":"/api","restMethod":"ANY","proxyIntegration":false,"enableCORS":false,"stageMode":0,"stageName":"dev"},"globallyEditable":true},"apigusWest1plazaapigetpersonget":{"name":"apigusWest1plazaapigetpersonget","type":"API_GATEWAY","config":{"selectedRegion":"us-west-1","apiMode":0,"apiName":"plaza","endpointType":"EDGE","resourceMode":0,"resourceName":"api.get.person","resourcePath":"/api.get.person","restMethod":"GET","proxyIntegration":false,"enableCORS":false,"stageMode":0,"stageName":"dev"},"globallyEditable":true},"rds-plaza2":{"name":"rds-plaza2","type":"RDS","config":{"editMode":false,"operation":0,"rdsInstance":{"rdsEngineType":"postgres","rdsEdition":"postgres","rdsInstanceSpec":{"dbInstanceClass":"db.t2.micro","dbLicenseModel":"postgresql-license","dbEngineVersion":"9.6.6"},"rdsSetting":{"instanceIdentifier":"plaza2","masterUsername":"caesar","masterPassword":"Coco4658210."},"rdsDBOptions":{"dbName":"plaza2","dbPort":5432},"rdsInstanceArn":"arn:aws:rds:us-west-1:074987839488:db:plaza2","Host":"plaza2.cwb6uminlglw.us-west-1.rds.amazonaws.com","doesExist":true},"rdsInstanceResources":[],"projectRegion":"us-west-1","mode":1,"additionalFiles":[],"params":{"query":"SELECT * FROM people","inserts":""},"isGlobalEditMode":false,"enableInject":true,"isNewFromGlobal":false},"globallyEditable":true},"rds-plaza-mysql":{"name":"rds-plaza-mysql","type":"RDS","config":{"editMode":false,"operation":0,"rdsInstance":{"rdsEngineType":"mysql","rdsEdition":"","rdsInstanceSpec":{"dbInstanceClass":"db.t2.micro","dbLicenseModel":"general-public-license","dbEngineVersion":"5.7.19","undefined":""},"rdsSetting":{"instanceIdentifier":"plaza-mysql","masterUsername":"caesar","masterPassword":"Coco4658210."},"rdsDBOptions":{"dbName":"plaza","dbPort":"1433"},"rdsInstanceArn":"","Host":"","doesExist":false,"initializationQuery":"CREATE TABLE \"people\" (\n    \"person_num\" int   NOT NULL,\n    \"first_name\" varchar   NOT NULL,\n    \"last_name\" varchar   NOT NULL,\n    \"email_addr\" varchar   NOT NULL,\n    CONSTRAINT \"pk_people\" PRIMARY KEY (\n        \"person_num\"\n     )\n);","alreadyDeployed":false},"rdsInstanceResources":[],"projectRegion":"us-west-1","mode":0,"additionalFiles":[],"params":{"query":"SELECT * FROM people","inserts":""},"isGlobalEditMode":false,"enableInject":true,"isNewFromGlobal":false},"globallyEditable":true}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"editable":false,"isEditable":false}],"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"slappforge-sdk-aws":{"name":"slappforge-sdk-aws","version":"0.0.5","notRemovable":false}}},"lambdaId":"975d2040-48a0-4122-a747-1c7b048f1ecb","additionalFiles":[]},"PROJECT_META":{"projectName":"plaza","projectDescription":"","projectVersion":"0.0.1","projectRegion":"us-west-1","repoName":"plaza","repoUrl":"https://github.com/jessebrooks/plaza","lastSave":1534612074054}}